<h1>Participant</h1>

<div class="btn-toolbar" role="toolbar">
  <%= link_to "Participants", participants_path, class: "btn btn-default" %>
  <%= link_to "Edit", edit_participant_path(@participant), class: "btn btn-default" %>
  <%= link_to "Destroy", participant_path(@participant), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-danger" %>
</div>

<p>
  <strong>Study Id:</strong>
  <%= @participant.study_id %>
</p>

<p>
  <strong>Email:</strong>
  <%= @participant.email %>
</p>

<p>
  <strong>Phone Number:</strong>
  <%= number_to_phone(@participant.phone_number, area_code: true) %>
</p>

<p>
  <strong>Contact Preference:</strong>
  <%= @participant.contact_preference.titleize %>
</p>

<p>
  <strong>Display Name:</strong>
  <%= @participant.display_name %>
</p>

<p>
  <strong>Membership Status:</strong>
  <%= membership_status @participant, @participant.active_membership %>
</p>

<p>
  <strong>Current Group:</strong>
  <% if @participant.active_membership && @participant.active_membership.group %>
    <%= link_to @participant.active_group.title, group_path(@participant.active_group) %>
  <% else %>
    None
  <% end %>
</p>

<p>
  <%= link_to "Assign Group", new_participant_group_path(@participant), class: "btn btn-default" %>
</p>

<p>
  <strong>Current Coach:</strong>
  <% if @participant.coach %>
    <%= link_to @participant.coach.email, participant_coach_path(@participant, @participant.coach) %>
  <% else %>
    None
  <% end %>
</p>

<p>
  <% if @participant.coach %>
    <%= link_to "Assign Coach", edit_participant_coach_path(@participant, @participant.coach), class: "btn btn-default" %>
  <% else %>
    <%= link_to "Assign Coach", new_participant_coach_path(@participant), class: "btn btn-default" %>
  <% end %>
</p>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">Memberships</h3>
  </div>
  <div class="panel-body">
    Below lists the all groups this participant has been a member of and whether they are currently active or inactive.
  </div>
  <ul class="list-group">
    <% @participant.memberships.each do |membership| %>
      <%= link_to membership_status(@participant, membership) + membership.group.title, participant_group_path(@participant, membership.group), class: "list-group-item" %>
    <% end %>
  </ul>
</div>